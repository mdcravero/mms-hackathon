
# MMS-Hackathon

MediaMarkt Cloud Engineering challenge

## TASKS-OBJECTIVES

1. Register the Container generated by the DockerFile with Cloud Build / Artifacts.   
2.  Generating a YAML file for Docker Composer.
3. Generate the Terraform files in order to have the infrastructure as code and be able to deploy with Kubernetes.
4. Answer the question to check the understanding of the Minimum Least Priviledge in the Roles assignment.

## Directories

 - cloud-build 
 - tf-deployment 
 - tf-state
 - IAM GCP Console

> The whole procedure was performed on the GCP Cloud Shell console, an
> even better automation could have been performed using GitHub actions
> or some other CI/CD, but due to the simplicity of the exercise and in
> order not to compromise credentials or use an account, this
> methodology was decided.

In the **first directory** we have a file called **cloudblild.yaml** that will be in charge of Clone, Create and finally push the docker image to the Artifact Registry.

> For this exercise, the Cloud Build and Artifact Registry APIs were activated.

To do this we must run the following command:

    gcloud builds submit --region=us-central1 --config cloudbuild.yaml .


In the **second folder** are the terraform files that create the necessary infrastructure for the application deployment (the terraform.tfvars variable file is not included, as it includes sensitive account information).

After downloading the repository we should enter the following command (inside the folder in question)

    terraform init

Then to verify that everything is in order

    terraform plan

and finally to apply everything

    terraform apply

> In first instance a deployment was performed with a Docker image from
> my personal account (from docker hub), where I had no problems to
> perform the pull, but from Artifact Registry I had some problems with
> permissions, as I did not have access to modify in IAM I could not
> leave it working as I wanted.

In the **third folder** I made a small implementation to create a bucket to serve as a backend to store the Terraform states

In the **fourth folder** there is a brief description of the roles, steps to create, edit and delete them and a personal opinion on how to assign them.

